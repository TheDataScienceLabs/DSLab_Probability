
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Week 5-6: Image Quantization &#8212; The Data Science Labs on Probability</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=9c3e77be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=4bca2e18" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=1ae7504c"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'labs/2_frequency/lab_03/lab_03_quantization';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Week 7: Acquiring and Manipulating Videos" href="../../3_video/lab_04/lab_04_video_intro.html" />
    <link rel="prev" title="Week 3-4: Probability as a Frequency" href="../lab_02/lab_02_prob_freq.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="The Data Science Labs on Probability - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="The Data Science Labs on Probability - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    About this Course
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction and Review</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../1_intro_and_review/lab_00/lab_00_intro.html">Week 1: Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../1_intro_and_review/lab_01/lab_01_py_review.html">Week 2: Review of Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Frequency</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lab_02/lab_02_prob_freq.html">Week 3-4: Probability as a Frequency</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Week 5-6: Image Quantization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Video</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../3_video/lab_04/lab_04_video_intro.html">Week 7: Acquiring and Manipulating Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../3_video/lab_05/lab_05_motion.html">Week 8: Motion Detection</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">RNG</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../4_rng/lab_06/lab_06_rng.html">Week 9: Random Number Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../4_rng/lab_07/lab_07_testing_rng.html">Week 10: Evaluating Random Number Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../4_rng/lab_08/lab_08_pi.html">Week 11-12: Estimating Pi with a RNG</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bayes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../6_naive_bayes_classifier/naive_bayes_classifier.html">Week 13: Naive Bayes Classifiers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extra Materials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../extra_materials/intro_to_breadboards/intro_to_breadboards.html">Introduction to Breadboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extra_materials/intro_to_latex/intro_to_latex.html">Introduction to <span class="math notranslate nohighlight">\(\LaTeX\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extra_materials/pico_datasheet/pico_datasheet.html">Raspberry Pi Pico Pinout</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/TheDataScienceLabs/DSLab_Probability" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/TheDataScienceLabs/DSLab_Probability/issues/new?title=Issue%20on%20page%20%2Flabs/2_frequency/lab_03/lab_03_quantization.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/labs/2_frequency/lab_03/lab_03_quantization.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Week 5-6: Image Quantization</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#content"><span style="color:#d97f00;"> 00. Content </span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#required-hardware"><span style="color:#d97f00;"> 0. Required Hardware </span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quantization"><span style="color:#d97f00;"> 1. Quantization  </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1"><span style="color:red"> Exercise 1</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2"><span style="color:red"> Exercise 2</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#histogram-equalization"><span style="color:#d97f00;"> 2. Histogram Equalization  </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3"><span style="color:red"> Exercise 3</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-part-1"><span style="color:red"> Exercise 4 Part 1</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-part-2"><span style="color:red"> Exercise 4 Part 2</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5"><span style="color:red"> Exercise 5</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6"><span style="color:red"> Exercise 6</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7"><span style="color:red"> Exercise 7</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-8"><span style="color:red"> Exercise 8</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-the-camera"><span style="color:#d97f00;"> 3. Connecting the Camera </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wiring-instructions">Wiring Instructions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#capturing-a-still-image">Capturing a still image</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-9"><span style="color:red"> Exercise 9</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-10"><span style="color:red"> Exercise 10</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-11"><span style="color:red"> Exercise 11</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection"><span style="color:green;"> Reflection </span></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="week-5-6-image-quantization">
<h1>Week 5-6: Image Quantization<a class="headerlink" href="#week-5-6-image-quantization" title="Link to this heading">#</a></h1>
<p><font size="6"> Laboratory 3 </font> <br>
<font size="3"> Last updated July 24, 2023 </font></p>
<section id="content">
<h2><span style="color:#d97f00;"> 00. Content </span><a class="headerlink" href="#content" title="Link to this heading">#</a></h2>
<p><font size="5"> Mathematics </font></p>
<ul class="simple">
<li><p>Probability mass function</p></li>
<li><p>Cumulative distribution function</p></li>
</ul>
<p><font size="5"> Programming Skills </font></p>
<ul class="simple">
<li><p>Functions</p></li>
<li><p>Loops</p></li>
<li><p>Multi-dimensional arrays</p></li>
</ul>
<p><font size="5"> Embedded Systems </font></p>
<ul class="simple">
<li><p>Thonny and MicroPython</p></li>
</ul>
</section>
<section id="required-hardware">
<h2><span style="color:#d97f00;"> 0. Required Hardware </span><a class="headerlink" href="#required-hardware" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Raspberry Pi Pico</p></li>
<li><p>Breadboard</p></li>
<li><p>USB connector</p></li>
<li><p>Camera (Arducam HM01B0)</p></li>
<li><p>8 Wires</p></li>
</ul>
<h3 style="background-color:#6994a2"> Write your name and email below: </h3>
<p><strong>Name:</strong></p>
<p><strong>Email:</strong></p>
</section>
<section id="quantization">
<h2><span style="color:#d97f00;"> 1. Quantization  </span><a class="headerlink" href="#quantization" title="Link to this heading">#</a></h2>
<p>In <a class="reference external" href="https://thedatasciencelabs.github.io/DataLab_Multivariate_Calculus/intro.html">The Data Science Labs on Mulitvariable Calculus</a>, we briefly introduce uniform quantization methods. Quantization of images refers to the process of reducing the information in an image from a wider range of values to a smaller range. Quantization is used for image compression to save storage space on devices, for creating image filters, and for processes like printing. As we saw observed in the previous lab on texture identification, grayscale images contain values between 0 and 255. However, what if we could only use 5 or 10 discrete values? In that case, we would require a mapping or function that transforms our original range of 0-255 to the 5 or 10 new discrete levels.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>    

<span class="n">num_levels</span><span class="o">=</span><span class="mi">5</span>
<span class="c1"># creates a numpy array of (length num_levels + 1) evenly spaced floating points from 0 to 255</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="n">num_levels</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># # creates a numpy array of (length num_levels) evenly spaced floating points from 0 to 255</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="n">num_levels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Grayscale Value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Quantized Value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Uniform Quantization in 1D with </span><span class="si">{</span><span class="n">num_levels</span><span class="si">}</span><span class="s1"> Levels&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can interpret uniform quantization from this graph. Given a image <span class="math notranslate nohighlight">\(I\)</span> with dimensions <span class="math notranslate nohighlight">\(m\times n\)</span>, at each pixel location <span class="math notranslate nohighlight">\((i,j)\)</span>, we have a grayscale value, which is an integer ranging from 0 to 255. Then, based on the graph, we modify the grayscale value at <span class="math notranslate nohighlight">\((i,j)\)</span> to a new value. For instance, with 5 quantization levels, if the original grayscale value is 40, we will change it to 0.</p>
<section id="exercise-1">
<h3><span style="color:red"> Exercise 1</span><a class="headerlink" href="#exercise-1" title="Link to this heading">#</a></h3>
<p>Write a function that takes in a grayscale image as a NumPy array and returns a uniformly quantized image with <span class="math notranslate nohighlight">\(k\)</span> levels. Download <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Probability/blob/ba00b60fad5c429ee02184eb4045928583cee7bd/book/labs/2_frequency/lab_03/additional_files/images/low_contrast.jpg">low_contrast.jpg</a> and show your results when <span class="math notranslate nohighlight">\(k=2,5,10,25\)</span>.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 1 Below </h3><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>                                   <span class="c1"># needed for reading images</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;low_contrast.jpg&#39;</span><span class="p">))</span>          <span class="c1"># read in the image and store it as a numpy array</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;image size is </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>                  <span class="c1"># create figure and set figure size</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>            <span class="c1"># display the image in grayscale between 0 and 255</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>                                          
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># COMPLETE YOUR FUNCTION HERE</span>
<span class="k">def</span><span class="w"> </span><span class="nf">uniform_quantization</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="k">return</span>

<span class="c1"># these are the test cases</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">quantized_img = uniform_quantization(img, 2)            # uniform quantization with k = 2</span>
<span class="sd">fig, ax = plt.subplots(figsize=(12,6))                  # create figure and set figure size</span>
<span class="sd">ax.imshow(quantized_img, cmap=&#39;gray&#39;, vmin=0,vmax=255)            # display the image in grayscale between 0 and 255</span>
<span class="sd">ax.axis(&#39;off&#39;)                                          </span>
<span class="sd">plt.show()</span>

<span class="sd">quantized_img = uniform_quantization(img, 5)            # uniform quantization with k = 5</span>
<span class="sd">fig, ax = plt.subplots(figsize=(12,6))                  # create figure and set figure size</span>
<span class="sd">ax.imshow(quantized_img, cmap=&#39;gray&#39;, vmin=0,vmax=255)            # display the image in grayscale between 0 and 255</span>
<span class="sd">ax.axis(&#39;off&#39;)                                          </span>
<span class="sd">plt.show()</span>

<span class="sd">quantized_img = uniform_quantization(img, 10)           # uniform quantization with k = 10</span>
<span class="sd">fig, ax = plt.subplots(figsize=(12,6))                  # create figure and set figure size</span>
<span class="sd">ax.imshow(quantized_img, cmap=&#39;gray&#39;, vmin=0,vmax=255)            # display the image in grayscale between 0 and 255</span>
<span class="sd">ax.axis(&#39;off&#39;)                                          </span>
<span class="sd">plt.show()</span>

<span class="sd">quantized_img = uniform_quantization(img, 25)           # uniform quantization with k = 25</span>
<span class="sd">fig, ax = plt.subplots(figsize=(12,6))                  # create figure and set figure size</span>
<span class="sd">ax.imshow(quantized_img, cmap=&#39;gray&#39;, vmin=0,vmax=255)            # display the image in grayscale between 0 and 255</span>
<span class="sd">ax.axis(&#39;off&#39;)                                          </span>
<span class="sd">plt.show()</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-2">
<h3><span style="color:red"> Exercise 2</span><a class="headerlink" href="#exercise-2" title="Link to this heading">#</a></h3>
<p>Write a function that quantizes an image according to the power function shown below with <span class="math notranslate nohighlight">\(k\)</span> levels and power <span class="math notranslate nohighlight">\(p\)</span>. This is an example of non-uniform quantization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num_levels</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">power</span> <span class="o">=</span> <span class="mf">4.0</span> 
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="n">num_levels</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">power</span><span class="p">),</span> <span class="n">num</span><span class="o">=</span><span class="n">num_levels</span><span class="p">),</span> <span class="n">power</span><span class="p">)</span> 
  
<span class="n">plt</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Grayscale Value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Quantized Value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Non-uniform Quantization in 1D&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<h3 style="background-color:#6994a2"> Write Answer for Exercise 2 Below </h3><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># COMPLETE YOUR FUNCTION HERE</span>
<span class="k">def</span><span class="w"> </span><span class="nf">power_quantization</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="histogram-equalization">
<h2><span style="color:#d97f00;"> 2. Histogram Equalization  </span><a class="headerlink" href="#histogram-equalization" title="Link to this heading">#</a></h2>
<p>Histogram equalization is an adaptive image processing method, which means that the transformation depends on the image itself. It is commonly used in medical imaging applications, as well as in scientific imaging fields such as astronomy and microbiology. In contrast to the non-adaptive uniform quantization method we discussed in the previous exercise, histogram equalization takes into account the specific characteristics of each image.</p>
<p>Let’s consider an image <span class="math notranslate nohighlight">\(I\)</span> of size <span class="math notranslate nohighlight">\(m \times n\)</span>. We can determine the probability that a pixel value is at level <span class="math notranslate nohighlight">\(\ell\)</span> by calculating the frequency of <span class="math notranslate nohighlight">\(\ell\)</span> in the image. This probability, known as the probability mass function (pmf), can be expressed as:</p>
<div class="math notranslate nohighlight">
\[ p_I(\ell) = \frac{\text{ \# of times $\ell$ appears in $I$}}{m\cdot n}\quad \text{ for } \ell = 0,1,2,\dots,255 \]</div>
<p>Furthermore, we can compute the cumulative distribution function (cdf) of <span class="math notranslate nohighlight">\(I\)</span>, denoted as <span class="math notranslate nohighlight">\(F_I(\ell)\)</span>, which represents the probaiblity that a pixel in I has a value less than or equal to <span class="math notranslate nohighlight">\(\ell\)</span>. The cdf is calculated as the cumulative sum of the pmf values:</p>
<div class="math notranslate nohighlight">
\[ F_I(\ell) = \sum_{j=0}^\ell p_I(j) \quad \text{ for } \ell = 0,1,2,\dots,255\]</div>
<p>By analyzing the pmf and cdf of an image, we can gain insights into the distribution of pixel values and use this information to perform histogram equalization.</p>
<section id="exercise-3">
<h3><span style="color:red"> Exercise 3</span><a class="headerlink" href="#exercise-3" title="Link to this heading">#</a></h3>
<p>Plot the probability mass function and the cumulative distribution function of <code class="docutils literal notranslate"><span class="pre">low_contrast.jpg</span></code>.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 3 Below </h3></section>
<section id="exercise-4-part-1">
<h3><span style="color:red"> Exercise 4 Part 1</span><a class="headerlink" href="#exercise-4-part-1" title="Link to this heading">#</a></h3>
<p>Plot the pmf and cdf of <code class="docutils literal notranslate"><span class="pre">low_contrast.jpg</span></code> after uniform quantization with <span class="math notranslate nohighlight">\(25\)</span> levels.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 4 Part 1 Below </h3></section>
<section id="exercise-4-part-2">
<h3><span style="color:red"> Exercise 4 Part 2</span><a class="headerlink" href="#exercise-4-part-2" title="Link to this heading">#</a></h3>
<p>Describe how the quantization process changed these two functions.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 4 Part 2 Below </h3><p>Now, we will derive the method of histogram equalization.</p>
<p>We start with an image <span class="math notranslate nohighlight">\(I\)</span> of size <span class="math notranslate nohighlight">\(m\times n\)</span>, and our objective is to define a mapping that transforms the original pixel intensities to new values. Let’s denote the transformed image as <span class="math notranslate nohighlight">\(I_{new}\)</span>.</p>
<p>The goal of histogram equalization is to distribute pixel intensities evenly across the entire range of values from 0 to 255. This means that <span class="math notranslate nohighlight">\(I_{new}\)</span> will have an equal number of pixels at each intensity level, resulting in a flat probability mass function (pmf) for <span class="math notranslate nohighlight">\(I_{new}\)</span>.</p>
</section>
<section id="exercise-5">
<h3><span style="color:red"> Exercise 5</span><a class="headerlink" href="#exercise-5" title="Link to this heading">#</a></h3>
<p>If the pmf of <span class="math notranslate nohighlight">\(I_{new}\)</span> is flat, how will the cdf of <span class="math notranslate nohighlight">\(I_{new}\)</span> look? Why?</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 5 Below </h3><p>We can denote the cdf of <span class="math notranslate nohighlight">\(I_{new}\)</span> by <span class="math notranslate nohighlight">\( H(\ell) = \sum_{j=0}^\ell p_{I_{new}}(j) \quad \text{ for } \ell = 0,1,2,\dots,255 \)</span></p>
<p>If <span class="math notranslate nohighlight">\(I_{new}\)</span> has the same number of pixels at each intensity, then there are <span class="math notranslate nohighlight">\(\frac{m\cdot n }{255}\)</span> pixels with a value of <span class="math notranslate nohighlight">\(\ell\)</span> for <span class="math notranslate nohighlight">\(\ell = 0,1,2,\dots,255\)</span>.</p>
</section>
<section id="exercise-6">
<h3><span style="color:red"> Exercise 6</span><a class="headerlink" href="#exercise-6" title="Link to this heading">#</a></h3>
<p>Explain why <span class="math notranslate nohighlight">\( H(\ell) = \frac{(\ell + 1)}{255} \quad \text{ for } \ell = 0,1,2,\dots,255 \)</span></p>
<h3 style="background-color:#6994a2"> Write Answer for Exercise 6 Below </h3><p>Now, in image <span class="math notranslate nohighlight">\(I\)</span>, the grayscale value 0 will change to some new value between <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(255\)</span>.
Since we haven’t defined the exact transformation map, let’s call that new level <span class="math notranslate nohighlight">\(n_0\)</span>.
Similarly, we will change pixels in <span class="math notranslate nohighlight">\(I\)</span> with the grayscale value 1 to some new value <span class="math notranslate nohighlight">\(n_1\)</span>.
Pixels with value 2 in <span class="math notranslate nohighlight">\(I\)</span> will change to the value <span class="math notranslate nohighlight">\(n_2\)</span>, and so on until we reach <span class="math notranslate nohighlight">\(n_{255}\)</span>.</p>
<p>In other words, in our transformed image <span class="math notranslate nohighlight">\(I_{new}\)</span>, we map the intensity levels <span class="math notranslate nohighlight">\(0,1,2,\dots,255\)</span> in the original image <span class="math notranslate nohighlight">\(I\)</span> to some new levels <span class="math notranslate nohighlight">\(n_0,n_1,n_2,\dots,n_{255}\)</span>.</p>
<p>We want the number of pixels with intensity between <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(\ell\)</span> in image <span class="math notranslate nohighlight">\(I\)</span> to be the same as the number of pixels with intensity between <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(n_\ell\)</span> in image <span class="math notranslate nohighlight">\(I_{new}\)</span>.</p>
<p>By definition, <span class="math notranslate nohighlight">\(F_I(\ell)\)</span> is the number pixels in <span class="math notranslate nohighlight">\(I\)</span> with intensity between <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(\ell\)</span>. Similarly, <span class="math notranslate nohighlight">\(H(n_\ell)\)</span> is the number of pixels in <span class="math notranslate nohighlight">\(I_{new}\)</span> with intensity between <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(n_\ell\)</span>.</p>
<p>To determine the ideal levels <span class="math notranslate nohighlight">\(n_0,n_1,n_2,\dots,n_{255}\)</span> that will even out the grayscale intensity in image <span class="math notranslate nohighlight">\(I\)</span>, we want to set
<span class="math notranslate nohighlight">\( F_I(\ell)  = H(n_\ell)\quad \text{ for } \ell = 0,1,2,\dots,255. \)</span></p>
</section>
<section id="exercise-7">
<h3><span style="color:red"> Exercise 7</span><a class="headerlink" href="#exercise-7" title="Link to this heading">#</a></h3>
<p>In the last line, evaluate the function <span class="math notranslate nohighlight">\(H\)</span> at <span class="math notranslate nohighlight">\(n_\ell\)</span> and solve for <span class="math notranslate nohighlight">\(n_\ell\)</span>. Format your answer using <span class="math notranslate nohighlight">\(\LaTeX\)</span>.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 7 Below </h3><hr class="docutils" />
<p><strong>NOTE</strong></p>
<p>This is a 2-week lab. Turn in the exercises above. Pick up from here during the next lab session.</p>
</section>
<hr class="docutils" />
<section id="exercise-8">
<h3><span style="color:red"> Exercise 8</span><a class="headerlink" href="#exercise-8" title="Link to this heading">#</a></h3>
<p>Now that we know the values for <span class="math notranslate nohighlight">\(n_0,n_1,n_2,\dots,n_{255}\)</span>, we are ready to implement the histogram equalization process.</p>
<p>Implement histogram equalization on <code class="docutils literal notranslate"><span class="pre">low_contrast.jpg</span></code>.
Plot the transformed image <span class="math notranslate nohighlight">\(I_{new}\)</span> along with the pmf and cdf of <span class="math notranslate nohighlight">\(I_{new}\)</span>.</p>
<p><em>Hint: If the new levels <span class="math notranslate nohighlight">\(n_0,n_1,\dots,n_{255}\)</span> are not integers (which is likely), then use <code class="docutils literal notranslate"><span class="pre">np.floor</span></code> function to round down.</em></p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 8 Below </h3></section>
</section>
<section id="connecting-the-camera">
<h2><span style="color:#d97f00;"> 3. Connecting the Camera </span><a class="headerlink" href="#connecting-the-camera" title="Link to this heading">#</a></h2>
<p>This time, we will record our own videos using the Arducam HM01B0, which is a small camera that can be connected to the Pico.</p>
<section id="wiring-instructions">
<h3>Wiring Instructions<a class="headerlink" href="#wiring-instructions" title="Link to this heading">#</a></h3>
<p>Please ensure that your microcontroller is not connected to the computer while you are wiring components together. If you are unsure about your wiring, please consult the instructor. Use your jumper wires to establish the following connections:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>HM01B0</p></th>
<th class="head"><p>Pico</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VCC</p></td>
<td><p>3V3</p></td>
</tr>
<tr class="row-odd"><td><p>SCL</p></td>
<td><p>GP5</p></td>
</tr>
<tr class="row-even"><td><p>SDA</p></td>
<td><p>GP4</p></td>
</tr>
<tr class="row-odd"><td><p>VSYNC</p></td>
<td><p>GP16</p></td>
</tr>
<tr class="row-even"><td><p>HREF</p></td>
<td><p>GP15</p></td>
</tr>
<tr class="row-odd"><td><p>PCLK</p></td>
<td><p>GP14</p></td>
</tr>
<tr class="row-even"><td><p>DO</p></td>
<td><p>GP6</p></td>
</tr>
<tr class="row-odd"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is an image of the completed breadboard:</p>
<p><img alt="img" src="https://raw.githubusercontent.com/TheDataScienceLabs/DSLab_Probability/main/book/labs/shared_files/connecting_the_camera/HM01B0_and_pico.png" /></p>
<!-- ![img](camera.jpg)

*Wiring the Arducam HM01B0 camera* 

![img](camerawiring.jpg)

*Connections to the PICO on breadboard* -->
<p>To find the names of the pins on the Raspberry Pi Pico, you can refer to its pinout diagram located <a class="reference external" href="https://datasheets.raspberrypi.com/pico/Pico-R3-A4-Pinout.pdf">here</a> or in the Extra Materials section. The HM01B0, on the other hand, should have its pins labeled.</p>
<p>After confirming that the wiring is correct, press and hold the BOOTSEL button on the Pico while plugging it in. Download the <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Probability/blob/main/book/labs/shared_files/connecting_the_camera/arducam.uf2">arducam.uf2</a> file and copy it onto the Pico’s drive using your computer’s file manager (it should be listed as an external drive: “RPI-RP2”) and not with Thonny. Once the file transfer is complete, the Pico will automatically disconnect, and its LED will start blinking rapidly.</p>
<p>Once the Pico has been successfully connected, please execute the following cell to ensure that we have successfully detected the Pico.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">serial</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">serial.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">list_ports</span>

<span class="n">PICO_HWID</span> <span class="o">=</span> <span class="s2">&quot;2E8A&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_pico_port</span><span class="p">():</span>
    <span class="n">pico_ports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">list_ports</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="n">PICO_HWID</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pico_ports</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;No Raspberry Pi Pico was detected. Check to make sure it is plugged in, and that no other programs are accessing it&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">pico_ports</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">device</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Here are all the serial devices detected:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">list_ports</span><span class="o">.</span><span class="n">comports</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">port</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">port</span><span class="o">.</span><span class="n">hwid</span><span class="p">)</span>

<span class="n">port</span> <span class="o">=</span> <span class="n">get_pico_port</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">selected port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2"> as most likely to have a raspberry pi pico&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="capturing-a-still-image">
<h3>Capturing a still image<a class="headerlink" href="#capturing-a-still-image" title="Link to this heading">#</a></h3>
<p>Now that the Pico and camera have been connected, execute the following cell to capture a still image.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">96</span> <span class="o">*</span> <span class="mi">96</span><span class="p">)</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="mi">96</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">read_until</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x55\xAA</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
    <span class="n">img</span><span class="o">.</span><span class="n">flat</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">buffer</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-9">
<h3><span style="color:red"> Exercise 9</span><a class="headerlink" href="#exercise-9" title="Link to this heading">#</a></h3>
<p>Repeat the previous exercise using your own captured image from the Arducam HM01B0 connected to a Pico.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 9 Below </h3></section>
<section id="exercise-10">
<h3><span style="color:red"> Exercise 10</span><a class="headerlink" href="#exercise-10" title="Link to this heading">#</a></h3>
<p>Can you think of any images that would not show significant improvement after applying histogram equalization?</p>
<h3 style="background-color:#6994a2"> Write Answer for Exercise 10 Below </h3></section>
<section id="exercise-11">
<h3><span style="color:red"> Exercise 11</span><a class="headerlink" href="#exercise-11" title="Link to this heading">#</a></h3>
<p>What happens if we first quantize the image, either uniformly or non-uniformly, with <span class="math notranslate nohighlight">\(k\)</span> levels and then apply the histogram equalization process? On the other hand, what happens if we apply histogram equalization first and then perform uniform or non-uniform quantization? How will increasing or decreasing the number of quantization levels <span class="math notranslate nohighlight">\(k\)</span> change the new pmf and cdf?</p>
<p>Write your hypothesis in a paragraph or two.</p>
<h3 style="background-color:#6994a2"> Write Answers for Exercise 11 Below </h3></section>
</section>
<section id="reflection">
<h2><span style="color:green;"> Reflection </span><a class="headerlink" href="#reflection" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Do you prefer uniform or non-uniform quantization, and why?</p></li>
<li><p>Which part of the lab did you find the most challenging?</p></li>
<li><p>Which part of the lab was the easiest?</p></li>
</ol>
<h3 style="background-color:#6994a2"> Write Answers for the Reflection Below </h3></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./labs/2_frequency/lab_03"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../lab_02/lab_02_prob_freq.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Week 3-4: Probability as a Frequency</p>
      </div>
    </a>
    <a class="right-next"
       href="../../3_video/lab_04/lab_04_video_intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Week 7: Acquiring and Manipulating Videos</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#content"><span style="color:#d97f00;"> 00. Content </span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#required-hardware"><span style="color:#d97f00;"> 0. Required Hardware </span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quantization"><span style="color:#d97f00;"> 1. Quantization  </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1"><span style="color:red"> Exercise 1</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2"><span style="color:red"> Exercise 2</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#histogram-equalization"><span style="color:#d97f00;"> 2. Histogram Equalization  </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3"><span style="color:red"> Exercise 3</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-part-1"><span style="color:red"> Exercise 4 Part 1</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-part-2"><span style="color:red"> Exercise 4 Part 2</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5"><span style="color:red"> Exercise 5</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6"><span style="color:red"> Exercise 6</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7"><span style="color:red"> Exercise 7</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-8"><span style="color:red"> Exercise 8</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-the-camera"><span style="color:#d97f00;"> 3. Connecting the Camera </span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wiring-instructions">Wiring Instructions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#capturing-a-still-image">Capturing a still image</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-9"><span style="color:red"> Exercise 9</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-10"><span style="color:red"> Exercise 10</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-11"><span style="color:red"> Exercise 11</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection"><span style="color:green;"> Reflection </span></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mireille Boutin, Alden Bradford
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>This work is licensed under a 
<a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>